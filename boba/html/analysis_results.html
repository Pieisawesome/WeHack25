<!DOCTYPE html>
<html>
<head>
    <title>Analysis Results</title>
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <header>
        <h1>Find Hot Signals In Your Area: <br>Cell Phone Tower</h1>
        <nav>
            <ul>
                <li><a href="./index.html">Home</a></li>
                <li><a href="./insert.html">Upload Image</a></li>
                <li><a href="./gallery.html">Gallery</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>Analysis Results</h1>
        <h3>Tower ID: {{ tower_id }}</h3>
        <div id="analysis-results-container">
        </div>
        <p><a href="./gallery.html">View Gallery</a></p>
    </main>

    <footer>
        <p>Lana Tran | <a href="https://www.linkedin.com/in/lana-tran-pie/">LinkedIn</a></li> | <a href="https://github.com/Pieisawesome/WeHack25#">GitHub</a>
        </p>
    </footer>
    <script>
        const analysisResults = JSON.parse('{{ analysis_results }}');
        const container = document.getElementById('analysis-results-container');

        analysisResults.forEach((result, index) => {
            const resultDiv = document.createElement('div');
            resultDiv.className = 'analysis-result';
            resultDiv.innerHTML = `
                <h3>Image: ${filenames[index]}</h3>
                <img src="/uploads/${tower_id}/${filenames[index]}" alt="${filenames[index]}" style="max-width: 500px;">
                <p class="error">${result.error ? 'Error: ' + result.error : ''}</p>
                <pre>${result.analysis ? result.analysis : 'No analysis available for this image.'}</pre>
            `;
            container.appendChild(resultDiv);
        });
    </script>
</body>
</html>