<!DOCTYPE html>
<html>
<head>
    <title>Tower Profile: {{ tower_id }}</title>
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <header>
        <h1>Find Hot Signals In Your Area: <br>Cell Phone Tower</h1>
        <nav>
            <ul>
                <li><a href="./index.html">Home</a></li>
                <li><a href="./insert.html">Upload Image</a></li>
                <li><a href="./gallery.html">Gallery</a></li>
            </ul>
        </nav>
    </header>

    <script>
        // Function to get URL parameters
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Get the 'tower_id' parameter from the URL
        const tower_id = getUrlParameter('tower_id');

        // Update the image source based on the 'tower_id' parameter
        function updateImageSource() {
            if (tower_id) {
                const imgElement = document.getElementById('tower-image');
                imgElement.src = `../uploads/${tower_id}/image.jpg`;
            }
        }

        // Call the function to update the image source when the page loads
        window.onload = updateImageSource;
    </script>

    <main>
        <h1>Image Gallery</h1>
        <div class="image-gallery">
            <div class="gallery-item">
                <img id="tower-image" src="" alt="Tower Image" style="max-width: 300px;">


        <h2>Analysis Results</h2>
        <div class="analysis-result" id="analysis-results-container">
        </div>
        <p>No analysis results available for this tower.</p>

        <p><a href="./gallery.html">Back to Gallery</a></p>
    </main>

    <footer>
        <p>Lana Tran | <a href="https://www.linkedin.com/in/lana-tran-pie/">LinkedIn</a></li> | <a href="https://github.com/Pieisawesome/WeHack25#">GitHub</a>
        </p>
    </footer>
    <script>
        const analysisResults = JSON.parse('{{ analysis_results }}');
        const container = document.getElementById('analysis-results-container');

        analysisResults.forEach(result => {
            const resultDiv = document.createElement('div');
            resultDiv.className = 'analysis-result';
            resultDiv.innerHTML = `<pre>${result.analysis}</pre>`;
            container.appendChild(resultDiv);
        });
    </script>
</body>
</html>